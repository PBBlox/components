<style>.ui-pictures ui-component{gap:var(--margin)}.ui-pictures-item{position:relative;cursor:grab}.ui-pictures-item span{background-color:#E73323;border-radius:20px;position:absolute;text-align:center;top:-5px;right:-5px;width:21px;height:21px;line-height:20px;font-size:11px;cursor:pointer !important;display:none}.ui-pictures-item:hover span{display:inline-block}.ui-pictures.ui-disabled .ui-pictures-remove{display:none !important}.ui-pictures-item span i{color:#FFF}.ui-pictures-item img{border-radius:var(--radius);border:1px solid #D0D0D0}.ui-dark .ui-pictures-item img{border:1px solid #383838}</style>
<script>COMPONENT('pictures@1','grid:4',function(self,config,cls){var cls2='.'+cls,container,template=Tangular.compile(`{{ foreach item in value}}
<div class="{0}-item" draggable="true" data-id="{{ item}}">
	<span class="{0}-remove"><i class="ti ti-remove"></i></span>
	<img src="{{ item}}" class="img-responsive" alt="" />
</div>
{{ end}}
`.format(cls));self.make=function(){self.aclass(cls);W[self.ID+'reorder']=function(img){if(config.disabled)return;let arr=[];for(let m of img)arr.push(ATTRD(m));self.bind('@modified @touched',arr)};self.append('<ui-component name="movable" config="selector:.{0}-item;exec:{1};disabled:{3}" class="grid-{2}"></ui-component>'.format(cls,self.ID+'reorder',config.grid,config.disabled));container=self.find('ui-component');self.event('click',cls2+'-remove',function(){if(config.disabled)return;var el=$(this);var model=self.get();var index=model.indexOf(ATTRD(el));if(index!=-1){model.splice(index,1);self.bind('@modified @touched',model);el.closest(cls2+'-item').remove()}});self.event('click',cls2+'-empty',function(){if(config.disabled)return;self.EXEC(config.upload,function(response){var model=self.get();if(!model||!(model instanceof Array))model=[];if(response instanceof Array)model.push.apply(model,response);else model.push(response);self.bind('@modified @touched @setter',model)})})};self.destroy=function(){delete W[self.ID+'reorder']};self.configure=function(key,value,init){if(key==='disabled'&&!init)container.component().reconfigure({disabled:value})};self.setter=function(value){let html=template({value:value||EMPTYARRAY});DIFFDOM(container,cls2+'-item',html)}});</script>